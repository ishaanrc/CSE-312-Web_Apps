<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
</head>

<script src='long_polling.js'>
</script>

<body>

{% for message in get_flashed_messages() %}
    <div class="flash">{{ message }}</div>
{% endfor %}

<div>
    <label ><b>Username</b></label>
    <input type="text" placeholder="Enter Username" required>

    <label><b>Password</b></label>
    <input type="password" placeholder="Enter Password"required>

    <button type="submit">Login</button>
    <button type="submit">Register</button>
</div>



<br />
<li>
    <a href="{{ url_for('friends.friends') }}">Friends    </a>
</li>
<br />

<h1>Welcome, Generic User, to [Insert Generic Social Media Site]!</h1>
<h2> This is a website which will connect you to friends</h2>

<div id = "Long_Poll">
<meta http-equiv="refresh" content="2">
<div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
        <p> You can create a text post and even post photos here!</p>

        <form method="post" enctype=multipart/form-data action="/upload">
            <label for="title">title</label>
            <input name="title" id="title" required>
            <label for="image">Image</label>
            <input type="file" name="image" id="image" required>
            <input type="submit" value="Post">
        </form>
    </div>

    <p> Or feel free to just browse</p>

</div>

<div id="posts">
    <ul>
        {% for post in posts %}
            <li>
                <h1>{{ post[0].id }}</h1>
                <h2>{{post[0]['title']}}</h2>
                <img src="/static/{{post[0]['image']}}" width="480">
                <br><br>

                <form method = "post" enctype="multipart/form-data" action="/upvote">

                    <input type="hidden" name="postid" id="postid" value="{{ post[0]['id']}}">
                    <input type = "hidden" name = "upvote" id="upvote" value="1">
                    <input type="Submit" value="Upvote">
                </form>
                <form method = "post" enctype="multipart/form-data" action="/downvote">
                    <input type="hidden" name="postid" id="postid" value="{{ post[0]['id']}}">
                    <input type = "hidden" name = "downvote" id="downvote" value="-1">
                    <input type="Submit" value="Downvote">
                </form>

                <h3> Vote Score is: {{post[0]['votes']}}</h3>

{#                <button>Upvote</button>#}
{#                <button>Downvote</button>#}
                <br><br>

                <form method="post" enctype="multipart/form-data" action="/uploadcomment">
                    <label for="comment">Comment on the Post!</label>
                    <input name="comment" id="comment" required>
                    <input type="hidden" name="postid" id="postid" value="{{ post[0]['id']}}">
                    <input type="submit" value="Comment">
                </form>
                <div id="comments">
                    {% for comment in post[1] %}

                        <h2>{{ comment['comment'] }}</h2>
                    {% endfor %}


                </div>


            </li>
        {% endfor %}
    </ul>
</div>
</div>
</body>
</html>
